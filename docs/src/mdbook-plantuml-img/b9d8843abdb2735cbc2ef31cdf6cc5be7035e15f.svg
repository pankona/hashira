<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="809px" preserveAspectRatio="none" style="width:939px;height:809px;background:#FFFFFF;" version="1.1" viewBox="0 0 939 809" width="939px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="37" x2="37" y1="36.2969" y2="802.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="199" x2="199" y1="36.2969" y2="802.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="438" x2="438" y1="36.2969" y2="802.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="611" x2="611" y1="36.2969" y2="802.4844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="850" x2="850" y1="36.2969" y2="802.4844"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="12" y="24.9951">client 1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="157" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="164" y="24.9951">daemon 1</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="398" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="405" y="24.9951">datastore</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="569" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="576" y="24.9951">daemon 2</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="64" x="818" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="50" x="825" y="24.9951">client 2</text><path d="M204,51.2969 L204,76.2969 L401,76.2969 L401,61.2969 L391,51.2969 L204,51.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M391,51.2969 L391,61.2969 L401,61.2969 L391,51.2969 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="210" y="68.3638">assume daemon 1 is offline</text><polygon fill="#181818" points="187,98.5625,197,102.5625,187,106.5625,191,102.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="37" x2="193" y1="102.5625" y2="102.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="44" y="97.4966">command-1 (cached)</text><polygon fill="#181818" points="187,127.6953,197,131.6953,187,135.6953,191,131.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="37" x2="193" y1="131.6953" y2="131.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="44" y="126.6294">command-2 (cached)</text><path d="M204,144.6953 L204,184.6953 L520,184.6953 L520,154.6953 L510,144.6953 L204,144.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M510,144.6953 L510,154.6953 L520,154.6953 L510,144.6953 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="210" y="161.7622">assume daemon 1 is online,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="214" y="176.895">then send all cached commands to datastore</text><polygon fill="#181818" points="426,207.0938,436,211.0938,426,215.0938,430,211.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="199" x2="432" y1="211.0938" y2="211.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="206" y="206.0278">command-1, 2 as JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="438" x2="480" y1="240.2266" y2="240.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="480" y1="240.2266" y2="253.2266"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="480" y1="253.2266" y2="253.2266"/><polygon fill="#181818" points="449,249.2266,439,253.2266,449,257.2266,445,253.2266" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="445" y="235.1606">apply command-1, 2</text><polygon fill="#181818" points="426,278.3594,436,282.3594,426,286.3594,430,282.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="199" x2="432" y1="282.3594" y2="282.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="206" y="277.2935">fetch(10 weeks)</text><polygon fill="#181818" points="210,322.625,200,326.625,210,330.625,206,326.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="437" y1="326.625" y2="326.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="216" y="306.4263">chunk of data as JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188" x="220" y="321.5591">10 weeks of data for example</text><line style="stroke:#181818;stroke-width:1.0;" x1="199" x2="241" y1="355.7578" y2="355.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="241" x2="241" y1="355.7578" y2="368.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="200" x2="241" y1="368.7578" y2="368.7578"/><polygon fill="#181818" points="210,364.7578,200,368.7578,210,372.7578,206,368.7578" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="206" y="350.6919">store JSON to local document store</text><path d="M616,381.7578 L616,406.7578 L813,406.7578 L813,391.7578 L803,381.7578 L616,381.7578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M803,381.7578 L803,391.7578 L813,391.7578 L803,381.7578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="622" y="398.8247">assume daemon 2 is offline</text><polygon fill="#181818" points="622,429.0234,612,433.0234,622,437.0234,618,433.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="616" x2="849" y1="433.0234" y2="433.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="628" y="427.9575">command-3 (cached)</text><polygon fill="#181818" points="622,458.1563,612,462.1563,622,466.1563,618,462.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="616" x2="849" y1="462.1563" y2="462.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="628" y="457.0903">command-4 (cached)</text><path d="M616,475.1563 L616,515.1563 L932,515.1563 L932,485.1563 L922,475.1563 L616,475.1563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M922,475.1563 L922,485.1563 L932,485.1563 L922,475.1563 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="622" y="492.2231">assume daemon 2 is online,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="626" y="507.356">then send all cached commands to datastore</text><polygon fill="#181818" points="449,537.5547,439,541.5547,449,545.5547,445,541.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="443" x2="610" y1="541.5547" y2="541.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="455" y="536.4888">command-3, 4 as JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="438" x2="480" y1="570.6875" y2="570.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="480" x2="480" y1="570.6875" y2="583.6875"/><line style="stroke:#181818;stroke-width:1.0;" x1="439" x2="480" y1="583.6875" y2="583.6875"/><polygon fill="#181818" points="449,579.6875,439,583.6875,449,587.6875,445,583.6875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="445" y="565.6216">apply command-3, 4</text><polygon fill="#181818" points="449,608.8203,439,612.8203,449,616.8203,445,612.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="443" x2="610" y1="612.8203" y2="612.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="455" y="607.7544">fetch(10 weeks)</text><polygon fill="#181818" points="599,637.9531,609,641.9531,599,645.9531,603,641.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="438" x2="605" y1="641.9531" y2="641.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="445" y="636.8872">chunk of data as JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="611" x2="653" y1="671.0859" y2="671.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="653" x2="653" y1="671.0859" y2="684.0859"/><line style="stroke:#181818;stroke-width:1.0;" x1="612" x2="653" y1="684.0859" y2="684.0859"/><polygon fill="#181818" points="622,680.0859,612,684.0859,622,688.0859,618,684.0859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="618" y="666.02">store JSON to local document store</text><polygon fill="#181818" points="426,709.2188,436,713.2188,426,717.2188,430,713.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="199" x2="432" y1="713.2188" y2="713.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="206" y="708.1528">fetch(10 weeks)</text><polygon fill="#181818" points="210,738.3516,200,742.3516,210,746.3516,206,742.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="204" x2="437" y1="742.3516" y2="742.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="216" y="737.2856">chunk o data as JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="199" x2="241" y1="771.4844" y2="771.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="241" x2="241" y1="771.4844" y2="784.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="200" x2="241" y1="784.4844" y2="784.4844"/><polygon fill="#181818" points="210,780.4844,200,784.4844,210,788.4844,206,784.4844" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="206" y="766.4185">store JSON to local document store</text></g></svg>